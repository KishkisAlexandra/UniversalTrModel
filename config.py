# config.py

# ======================================================================================
# 1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
# ======================================================================================
SCENARIOS = {"–≠–∫–æ–Ω–æ–º–Ω—ã–π": 0.85, "–°—Ä–µ–¥–Ω–∏–π": 1.0, "–†–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω—ã–π": 1.25}
HOUSE_COEFS = {"–ù–æ–≤—ã–π": {"heating": 1.0, "electricity": 1.0}, "–°—Ä–µ–¥–Ω–∏–π": {"heating": 1.05, "electricity": 1.05}, "–°—Ç–∞—Ä—ã–π": {"heating": 1.1, "electricity": 1.05}}
REALISM_UPLIFT = 1.07

# ======================================================================================
# 2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Ä–æ–¥–∞—Ö
# ======================================================================================
CITIES_DB = {
    "–ú–∏–Ω—Å–∫": {
        "currency": "BYN",
        "services": ["–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è", "–í–æ–¥–∞", "–ö–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è", "–û—Ç–æ–ø–ª–µ–Ω–∏–µ", "–§–∏–∫—Å. –ø–ª–∞—Ç–µ–∂–∏"],
        "heating_months": [1, 2, 3, 4, 10, 11, 12],
        "volume_model": "standard_minsk",
        # –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        "recommendations": {
            "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è": ("üí°", "–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–µ –ª–∞–º–ø—ã –∏ –±—ã—Ç–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É –∫–ª–∞—Å—Å–∞ A++."),
            "–í–æ–¥–∞": ("üö∞", "—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞—ç—Ä–∞—Ç–æ—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä—É–±—ã –Ω–∞ –ø—Ä–æ—Ç–µ—á–∫–∏."),
            "–ö–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è": ("üíß", "–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–∞—Å—Ö–æ–¥ –≤–æ–¥—ã –∏ –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∏."),
            "–û—Ç–æ–ø–ª–µ–Ω–∏–µ": ("üî•", "–∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –æ–∫–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä—ã."),
            "–§–∏–∫—Å. –ø–ª–∞—Ç–µ–∂–∏": ("üè¢", "—É—Ç–æ—á–Ω–∏—Ç–µ –≤ –ñ–≠–° —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.")
        }
    },
    "–õ–∏–º–∞—Å–æ–ª": {
        "currency": "‚Ç¨",
        "services": ["–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è", "–í–æ–¥–∞", "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç", "–¢–µ–ª–µ—Ñ–æ–Ω", "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"],
        "heating_months": [],
        "volume_model": "standard_limassol",
        # –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        "recommendations": {
            "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è": ("üí°", "–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–π–º–µ—Ä—ã –∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–µ –ø—Ä–∏–±–æ—Ä—ã."),
            "–í–æ–¥–∞": ("üö∞", "—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞—ç—Ä–∞—Ç–æ—Ä—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–∞—Å—Ö–æ–¥ –≤–æ–¥—ã."),
            "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç": ("üåê", "—Å—Ä–∞–≤–Ω–∏—Ç–µ —Ç–∞—Ä–∏—Ñ—ã –∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Å–ª—É–≥–∏."),
            "–¢–µ–ª–µ—Ñ–æ–Ω": ("üìû", "–æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã –∑–≤–æ–Ω–∫–æ–≤ –∏ –º–æ–±–∏–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫."),
            "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ": ("üè¢", "–ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—á–µ—Ç–∞ –∑–∞ –æ–±—â–∏–µ —É—Å–ª—É–≥–∏ –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏.")
        }
    }
}

# ======================================================================================
# 3. –¢–∞—Ä–∏—Ñ—ã –∏ "–ü—Ä–æ–≥—Ä–∞–º–º—ã" —Ä–∞—Å—á–µ—Ç–æ–≤ (–ö–æ–Ω–≤–µ–π–µ—Ä—ã)
# ======================================================================================
TARIFFS_DB = {
    "–ú–∏–Ω—Å–∫": {
        "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è": {
            "params": {"subsidy_rate": 0.2412, "full_rate": 0.2969},
            "pipeline": [{"operator": "get_volume", "source": "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è"}, {"operator": "apply_subsidy", "params_keys": ["subsidy_rate", "full_rate"]}]
        },
        "–í–æ–¥–∞": {
            "params": {"rate": 1.7858},
            "pipeline": [{"operator": "get_volume", "source": "–í–æ–¥–∞"}, {"operator": "multiply_by_param", "param_key": "rate"}]
        },
        "–ö–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è": {
            "params": {"rate": 0.9586},
            "pipeline": [{"operator": "get_volume", "source": "–ö–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è"}, {"operator": "multiply_by_param", "param_key": "rate"}]
        },
        "–û—Ç–æ–ø–ª–µ–Ω–∏–µ": {
            "params": {"subsidy_rate": 24.7187, "full_rate": 134.94},
            "pipeline": [{"operator": "get_volume", "source": "–û—Ç–æ–ø–ª–µ–Ω–∏–µ"}, {"operator": "apply_subsidy", "params_keys": ["subsidy_rate", "full_rate"]}]
        },
        # –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –∫–æ–Ω–≤–µ–π–µ—Ä –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
        "–§–∏–∫—Å. –ø–ª–∞—Ç–µ–∂–∏": {
            "params": {"maintenance": 0.0388, "lighting": 0.0249, "waste": 0.2092, "repair": 0.05, "elevator_rate": 0.88, "zero": 0},
            "pipeline": [
                {"operator": "sum_of_steps", "pipelines": [
                    [{"operator": "get_param", "param_key": "area_m2"}, {"operator": "multiply_by_param", "param_key": "maintenance"}],
                    [{"operator": "get_param", "param_key": "area_m2"}, {"operator": "multiply_by_param", "param_key": "lighting"}],
                    [{"operator": "get_param", "param_key": "occupants"}, {"operator": "multiply_by_param", "param_key": "waste"}],
                    [{"operator": "get_param", "param_key": "area_m2"}, {"operator": "multiply_by_param", "param_key": "repair"}],
                    [
                        {"operator": "apply_conditional_value", "check_param": "floor", "condition": "gt", "threshold": 1, "value_if_true": "elevator_rate", "value_if_false": "zero"},
                        {"operator": "multiply_by_context", "param_key": "occupants"}
                    ]
                ]}
            ]
        }
    },
    "–õ–∏–º–∞—Å–æ–ª": {
        "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è": {
            "vat": 0.19, "params": {"rate": 0.2661},
            "pipeline": [{"operator": "get_volume", "source": "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è"}, {"operator": "multiply_by_param", "param_key": "rate"}, {"operator": "apply_vat"}]
        },
        "–í–æ–¥–∞": {
            "vat": 0.05,
            "params": {"base_fee": 22.0, "brackets": [{"from": 1, "to": 40, "rate": 0.9}, {"from": 41, "to": 80, "rate": 1.43}]},
            "pipeline": [{"operator": "get_volume", "source": "–í–æ–¥–∞"}, {"operator": "apply_progressive_rate", "param_key": "brackets"}, {"operator": "add_param", "param_key": "base_fee"}, {"operator": "apply_vat"}]
        },
        "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç": {
            "vat": 0.19, "params": {"amount": 20},
            "pipeline": [{"operator": "get_fixed_amount", "param_key": "amount"}, {"operator": "apply_vat"}]
        },
        "–¢–µ–ª–µ—Ñ–æ–Ω": {
            "vat": 0.19, "params": {"amount": 20},
            "pipeline": [{"operator": "get_fixed_amount", "param_key": "amount"}, {"operator": "apply_vat"}]
        },
        "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ": {
            "vat": 0.19, "params": {"min": 45, "max": 125, "avg_coeff": 0.5},
            "pipeline": [
                {"operator": "sum_of_steps", "pipelines": [[{"operator": "get_fixed_amount", "param_key": "min"}], [{"operator": "get_fixed_amount", "param_key": "max"}]]},
                {"operator": "multiply_by_param", "param_key": "avg_coeff"},
                {"operator": "apply_vat"}
            ]
        }
    }
}
